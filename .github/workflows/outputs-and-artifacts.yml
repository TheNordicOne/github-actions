name: Outputs and Artifacts
on:
  push:
    branches:
      - main
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Get code
        uses: actions/checkout@v4
      - name: Install dependencies
        run: npm ci
      - name: Test code
        run: npm run test
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Get code
        uses: actions/checkout@v4
      - name: Install dependencies
        run: npm ci
      - name: Build website
        run: npm run build
      - name: Upload Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: dist-files
          path: dist
          # Upload multiple files under one artifact by using |
          # path: |
          #   dist/
          #   README.md
  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Download Artifacts
        uses: actions/download-artifact@v4
        with:
          name: dist-files # Downloads the artifact and unzips it. The output will not be in dist folder. Check following step to see the output. This would propably different if we have multiple files in the artifact, like in the example above
      - name: List files
        run: ls
      - name: Deploy
        run: echo "Deploying..."
